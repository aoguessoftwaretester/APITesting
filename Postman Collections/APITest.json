{
	"info": {
		"_postman_id": "2257e266-0b88-4cea-9938-282714099ef9",
		"name": "APITestAuto",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "Request Auth Token",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "fb7fd3f9-cca1-4a6d-aea9-8b41c9898ed4",
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"pm.environment.set(\"token\", jsonData.token);\r",
							"\r",
							"pm.test(\"Token is generated\", function () {\r",
							"    pm.expect(jsonData.token).to.not.be.undefined;\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "de7ab6a9-a8d3-4cd2-b3d7-dd21150d5f5f",
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"id": "c2ed3752-9f8d-4533-8853-2980dd9cf37e",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"username\": \"admin\",\r\n    \"password\": \"password123\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": "{{baseURL}}/auth"
			},
			"response": []
		},
		{
			"name": "Create Booking 1",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "e8fad0f5-0e18-480c-b41a-21e6936d2190",
						"exec": [
							"pm.test(\"Booking created successfully\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var responseData = pm.response.json();\r",
							"pm.environment.set(\"bookingId\", responseData.bookingid);\r",
							"pm.environment.set(\"firstName\", responseData.booking.firstname);\r",
							"\r",
							"pm.test(\"Booking ID is stored\", function () {\r",
							"    pm.expect(pm.environment.get(\"bookingId\")).to.not.be.null;\r",
							"});\r",
							"\r",
							"// Parse request body to compare with response\r",
							"var requestBody = JSON.parse(pm.request.body.raw);\r",
							"\r",
							"pm.test(\"Response firstname matches request\", function () {\r",
							"    pm.expect(responseData.booking.firstname).to.eql(requestBody.firstname);\r",
							"});\r",
							"\r",
							"pm.test(\"Response lastname matches request\", function () {\r",
							"    pm.expect(responseData.booking.lastname).to.eql(requestBody.lastname);\r",
							"});\r",
							"\r",
							"pm.test(\"Response totalprice matches request\", function () {\r",
							"    pm.expect(responseData.booking.totalprice).to.eql(requestBody.totalprice);\r",
							"});\r",
							"\r",
							"pm.test(\"Response depositpaid matches request\", function () {\r",
							"    pm.expect(responseData.booking.depositpaid).to.eql(requestBody.depositpaid);\r",
							"});\r",
							"\r",
							"pm.test(\"Response checkin date matches request\", function () {\r",
							"    pm.expect(responseData.booking.bookingdates.checkin).to.eql(requestBody.bookingdates.checkin);\r",
							"});\r",
							"\r",
							"pm.test(\"Response checkout date matches request\", function () {\r",
							"    pm.expect(responseData.booking.bookingdates.checkout).to.eql(requestBody.bookingdates.checkout);\r",
							"});\r",
							"\r",
							"pm.test(\"Response additionalneeds matches request\", function () {\r",
							"    pm.expect(responseData.booking.additionalneeds).to.eql(requestBody.additionalneeds);\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"id": "10d44625-3202-4dd3-a174-cc4f2b442677",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"firstname\": \"John\",\r\n  \"lastname\": \"Smith\",\r\n  \"totalprice\": 500,\r\n  \"depositpaid\": true,\r\n  \"bookingdates\": {\r\n    \"checkin\": \"2024-01-01\",\r\n    \"checkout\": \"2024-01-10\"\r\n  },\r\n  \"additionalneeds\": \"Breakfast\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": "{{baseURL}}/booking"
			},
			"response": []
		},
		{
			"name": "Get Booking",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "035d15cb-66c1-4570-93fe-9d0873865b34",
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var data = pm.response.json();\r",
							"\r",
							"pm.test(\"First name matches created booking\", function () {\r",
							"    pm.expect(data.firstname).to.eql(pm.environment.get(\"firstName\"));\r",
							"});\r",
							"\r",
							"pm.test(\"Booking ID exists\", function () {\r",
							"    pm.expect(pm.environment.get(\"bookingId\")).to.not.be.undefined;\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"id": "7eed9b34-7273-4c02-95f3-ac04f1db90c2",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [],
				"url": "{{baseURL}}/booking/{{bookingId}}"
			},
			"response": []
		},
		{
			"name": "Update Booking with Invalid Token",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "dd29edd8-de8b-4cf1-9a70-8418c9e4d50d",
						"exec": [
							"pm.test(\"Status code is 403 Forbidden\", function () {",
							"    pm.expect(pm.response.code).to.eql(403);",
							"});",
							"",
							"pm.test(\"Check if the response body contains 'Forbidden'\", function () {",
							"    pm.expect(pm.response.text()).to.include(\"Forbidden\");",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"id": "f117c9cc-e2bf-4588-95b9-2b8ec02df9b6",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": {
						"token": "{{ExpiredToken}}"
					}
				},
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{ExpiredToken}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"firstname\": \"Michael\",\r\n  \"lastname\": \"Smith\",\r\n  \"totalprice\": 700,\r\n  \"depositpaid\": false,\r\n  \"bookingdates\": {\r\n    \"checkin\": \"2024-02-01\",\r\n    \"checkout\": \"2024-02-15\"\r\n  },\r\n  \"additionalneeds\": \"Lunch\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": "{{baseURL}}/booking/{{bookingId}}"
			},
			"response": []
		},
		{
			"name": "Update Booking with Valid Token",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "dd29edd8-de8b-4cf1-9a70-8418c9e4d50d",
						"exec": [
							"pm.test(\"Booking updated\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var data = pm.response.json();\r",
							"pm.test(\"First name updated\", function () {\r",
							"    pm.expect(data.firstname).to.eql(\"Michael\");\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"id": "da212890-5f9b-46c8-9243-2d2ae12c32e5",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "basic",
					"basic": {
						"password": "password123",
						"username": "admin"
					}
				},
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "Cookie",
						"value": "token={{token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"firstname\": \"Michael\",\r\n  \"lastname\": \"Smith\",\r\n  \"totalprice\": 700,\r\n  \"depositpaid\": false,\r\n  \"bookingdates\": {\r\n    \"checkin\": \"2024-02-01\",\r\n    \"checkout\": \"2024-02-15\"\r\n  },\r\n  \"additionalneeds\": \"Lunch\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": "{{baseURL}}/booking/{{bookingId}}"
			},
			"response": []
		},
		{
			"name": "Delete Booking",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d8fcb21d-c3be-4bdc-892e-e72b215fbf5d",
						"exec": [
							"pm.test(\"Booking deleted successfully\", function () {\r",
							"    pm.response.to.have.status(201);\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"id": "14c05fdd-074f-41ab-aadf-c82fd1255f93",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "basic",
					"basic": {
						"password": "password123",
						"username": "admin"
					}
				},
				"method": "DELETE",
				"header": [
					{
						"key": "Cookie",
						"value": "token={{token}}",
						"type": "text"
					}
				],
				"url": "{{baseURL}}/booking/{{bookingId}}"
			},
			"response": []
		}
	]
}